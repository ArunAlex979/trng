# TRNG: True Random Number Generator from Fish Movement

This project implements a True Random Number Generator (TRNG) that derives entropy from the unpredictable movements of fish in live YouTube aquarium streams. It leverages computer vision techniques to detect and track fish, extract movement-based entropy, condition that entropy into cryptographically-usable keys, and run statistical tests to validate randomness.

## Features

- **Live Stream Integration**: Captures video from a curated list of YouTube live aquarium streams.
- **Fish Detection & Tracking**: Uses object detection models to identify and track fish within the video feed.
- **Entropy Extraction**: Extracts entropy from the movement patterns and positions of detected fish.
- **Randomness Conditioning**: Conditions the raw entropy to produce high-quality, cryptographically secure random numbers (keys).
- **Randomness Testing**: Integrates statistical tests to evaluate the quality and randomness of the generated keys.
- **Real-time Visualization**: Dashboard displaying the live video feed, entropy pool status, and byte distribution histogram.
- **Dynamic Stream Switching**: Press 'n' in the video window to switch to a new random YouTube live stream.
- **Stream URL Display**: The current YouTube stream URL is displayed directly on the video feed for easy reference.

## Getting Started

### Prerequisites

- Python 3.x
- OpenCV
- yt-dlp
- Other dependencies listed in `requirements.txt`

### Installation

1. Clone the repository:
   ```bash
   git clone https://github.com/ArunAlex979/trng.git
   cd trng
   ```
2. Install the required Python packages:
   ```bash
   pip install -r requirements.txt
   ```
3. Ensure you have the `yolov8n.pt` model file (or another compatible model) in the project root directory.

### Running the TRNG

To start the TRNG and begin generating random numbers:

```bash
python src/main.py
```

A dashboard window will appear, showing the live aquarium feed, detected fish, entropy collection status, and a histogram of collected bytes.

### Controls

- `q`: Press `q` to quit the application.
- `n`: Press `n` to switch to a new random YouTube live stream.

## Project Structure

- `src/main.py`: Main entry point for the TRNG application; coordinates capture, processing, extraction, conditioning, and visualization.
- `src/__init__.py`: Package initializer for the src package.
- `src/multi_video_capture.py`: Handles capturing video from multiple YouTube streams and switching between them as needed.
- `src/stream_processor.py`: Frame processing pipeline â€” receives frames from capture, prepares them for detection and entropy extraction.
- `src/fish_detector.py`: Fish detection and tracking logic (object detection, bounding box handling, tracking across frames).
- `src/entropy_extractor.py`: Extracts raw entropy from detected fish movements and updates the entropy pool.
- `src/conditioning.py`: Conditioning functions that transform raw entropy into cryptographically suitable output (key derivation/conditioning).
- `src/key_auditor.py`: Auditing utilities for generated keys, ensuring metadata, reproducibility, and logging of key creation events.
- `src/key_correlation_analysis.py`: Tools to analyze correlations across generated keys and assess potential weaknesses.
- `src/randomness_tests.py`: Statistical tests and utilities for evaluating the randomness of produced bytes/keys.
- `src/visualization.py`: Real-time visualization code (video overlay, entropy pool status, histograms, and diagnostics).
- `data/live_streams.txt`: List of YouTube live stream URLs used as video sources.
- `generated_keys.txt`: Stores the cryptographically secure keys generated by the TRNG (or a configured output location).
- `yolov8n.pt`: YOLOv8 nano model weights (or other model weights used for detection).
- `requirements.txt`: Python package dependencies for the project.
- `trng.log`: Application log output (created at runtime).

## Logging

The application logs its activities to `trng.log` and the console.

## Contributing

Feel free to fork the repository, open issues, and submit pull requests.

## License

[Specify your license here, e.g., MIT License]
